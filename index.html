<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Weather</title>
        <style>
            * {
                margin: 0;
            }
            body {
                width: 100%;
                height: 100vh;
                background-color: black;
                overflow: hidden;
            }
            .weather {
                font-size: 48px;
                position: absolute;
                top: 50%;
                left: 10%;
                transform: translate(0, -50%);
            }
            .rain-box {
                position: absolute;
                width: 100%;
                height: 100vh;
                margin-top: -20px;
                display: flex;
                justify-content: space-evenly;
                visibility: hidden;
            }
            .rain {
                width: 10px;
                height: 100px;
                transform: rotate(15deg);
            }
            .rain:nth-child(2)::after {
                animation-delay: 0.4s;
            }
            .rain:nth-child(3)::after {
                animation-delay: 0.3s;
            }
            .rain:nth-child(4)::after {
                animation-delay: 0.2s;
            }
            .rain:nth-child(5)::after {
                animation-delay: 0.1s;
            }
            .rain::after {
                content: "";
                display: inline-block;
                width: 5px;
                height: 50px;
                background-color: rgba(255, 255, 255, 0.5);
                border-radius: 5px;
                margin-top: 0px;
                animation: drip 0.8s infinite;
            }
            @keyframes drip {
                0% {
                    margin-top: 0;
                    height: 0;
                }
                20% {
                    height: 50px;
                }
                100% {
                    margin-top: 100vh;
                    height: 10px;
                }
            }
        </style>
    </head>
    <body>
        <h1 class="weather"></h1>
        <div class="rain-box">
            <div class="rain"></div>
            <div class="rain"></div>
            <div class="rain"></div>
            <div class="rain"></div>
            <div class="rain"></div>
        </div>
        <script
            src="https://code.jquery.com/jquery-3.6.1.min.js"
            integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
            crossorigin="anonymous"
        ></script>
        <script>
            const now = new Date();
            const hour = now.getHours();

            $.get(
                "https://opendata.cwb.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=CWB-A8D0E97B-19AA-4DA6-9229-C2A39DF250A1&locationName=%E6%9D%BF%E6%A9%8B&elementName=TEMP,Weather&parameterName=",
                function (data) {
                    const temp =
                        data["records"]["location"][0]["weatherElement"][0][
                            "elementValue"
                        ];
                    const weather =
                        data["records"]["location"][0]["weatherElement"][1][
                            "elementValue"
                        ];
                    const isRain = weather.match("é›¨");
                    $(".weather").text(weather);
                    if (temp > 26) {
                        if (hour > 18) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(180deg, #232742 0%, #504762 83.5%, #1E1B22 100%)"
                                )
                                .css("color", "white");
                        } else if (hour < 5) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(180deg, #232742 0%, #504762 83.5%, #1E1B22 100%)"
                                )
                                .css("color", "white");
                        } else if (hour < 10) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(187.53deg, #000C35 5.31%, #0B1E62 27.06%, #5896D2 53.08%, #FEFBEC 87.09%, #F6DE72 95.47%, #E9A25E 99.9%)"
                                )
                                .css("color", "white");
                        } else if (hour < 16) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(111.2deg, #092D74 0%, #3E73BF 29.71%, #81ACCF 81.32%)"
                                )
                                .css("color", "black");
                        } else if (hour < 19) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(170.27deg, #1F4665 8.66%, #577692 27.99%, #C08079 51.09%, #FD8B42 71.24%, #FDD077 92.68%)"
                                )
                                .css("color", "black");
                        }
                    } else {
                        if (hour > 18) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(180deg, #232742 0%, #504762 83.5%, #1E1B22 100%)"
                                )
                                .css("color", "white");
                        } else if (hour < 5) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(180deg, #232742 0%, #504762 83.5%, #1E1B22 100%)"
                                )
                                .css("color", "white");
                        } else if (hour < 10) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(199.39deg, #6A70D0 10.06%, #9A97DA 27.75%, #D6CBEA 48.91%, #ECE5F7 74.29%, #EFE5EE 86.98%)"
                                )
                                .css("color", "white");
                        } else if (hour < 16) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(111.2deg, #092D74 0%, #3E73BF 29.71%, #81ACCF 81.32%)"
                                )
                                .css("color", "black");
                        } else if (hour < 19) {
                            $("body")
                                .css(
                                    "background",
                                    "linear-gradient(180deg, #216EC8 0%, #637EC4 23%, #8B8BBF 50.5%, #B59FAC 83.5%, #F1C8A5 100%)"
                                )
                                .css("color", "black");
                        }
                    }
                    if (isRain) {
                        $(".rain-box").css("visibility", "visible");
                    }
                }
            );
        </script>
    </body>
</html>
